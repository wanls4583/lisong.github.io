!function(t){var e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";var s=function(t){return t&&t.__esModule?t:{default:t}}(i(1));var o=document.querySelector("#wrapper"),r=document.querySelector("#scroller"),h=document.querySelector(".top_tip"),a=document.querySelector(".bottom_tip");l();var n=new s.default({wrapper:o,scroller:r,topTip:h,bottomTip:a,enableBar:!0,barClassName:"bar",enableFadeout:!0,useNativeScroll:!0,onMove:function(t,e){e==s.default.REFRESH_ABLE?h.innerHTML="松开刷新...":h.innerHTML="下拉刷新...";e==s.default.LOAD_ABLE?a.innerHTML="松开加载...":a.innerHTML="上拉加载..."},onRefresh:l,onLoad:function(){a.innerHTML="加载中...",setTimeout(function(){for(var t=0;t<5;t++){var e=document.createElement("div");e.innerHTML='<img src="./img/head.jpg"><p><span class="title">无极剑圣▪易大师</span><br><span class="desc">易大师每攻击数次，就会同时对目标进行2次打击</span></p>',e.className="item",document.querySelector(".content").appendChild(e)}n&&n.refresh()},1e3)}});function l(){h.innerHTML="刷新中...",setTimeout(function(){for(var t="",e=0;e<15;e++)t+='<div class="item"><img src="./img/head.jpg"><p><span class="title">无极剑圣▪易大师</span><br><span class="desc">易大师每攻击数次，就会同时对目标进行2次打击</span></p></div>';document.querySelector(".content").innerHTML=t,n&&n.refresh()},1e3)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}();var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.startY,this.startTime,this.endTime,this.preY=0,this.disY,this.isOutTop=!1,this.isOutBottom=!1,this.barFadeTimeoutId=null,this.baunceTimeoutId=null,this.barOpacity=1,this.hasSlideUp=!1,this.allListener=[],this._init(e)}return s(t,[{key:"_init",value:function(t){var e=this,i=function(){};this.wrapper=t.wrapper,this.scroller=t.scroller,this.bar=null,this.barClassName=t.barClassName,this.enableFadeout=t.enableFadeout,this.useNativeScroll=t.useNativeScroll,this.enableBar=t.enableBar,this.onStart=t.onStart||i,this.onMove=t.onMove||i,this.onBottom=t.onBottom||i,this.onEnd=t.onEnd||i,this.onLoad=t.onLoad||i,this.onRefresh=t.onRefresh||i,this.autoLoad=t.autoLoad,this.topTip=t.topTip,this.bottomTip=t.bottomTip,this.nomore=!1,this.topTipHeight=0,this.bottomTipHeight=0,this.topTip&&(this.topTip.style.display="block",this.topTipHeight=this.topTip.clientHeight),this.bottomTip&&(this.bottomTip.style.display="block",this.bottomTipHeight=this.bottomTip.clientHeight),this.barHeight=this.wrapper.clientHeight*(this.wrapper.clientHeight/this.wrapper.scrollHeight),this.enableBar&&(this.bar=this._createScrollBar())&&(this.bar.style.display="none"),this.useNativeScroll?(this.wrapper.style.overflow="auto",this.scroller.style.marginBottom="-"+this.topTipHeight+"px"):(this.barHeight=this.wrapper.clientHeight*(this.wrapper.clientHeight/this.wrapper.scrollHeight),this.enableBar&&(this.bar=this._createScrollBar())&&(this.bar.style.display="none"),this.scroller.style.overflow="visible",this.wrapper.style.overflow="hidden",this.wrapper.style.position="relative"),this.minOffsetY=-this.topTipHeight,this.maxOffsetY=this.wrapper.clientHeight-this.scroller.clientHeight,this.offsetY=this.minOffsetY,this._tranlate(this.scroller),this._bindEvent(this.wrapper,"touchstart",function(t){e._start(t)}),this._bindEvent(this.wrapper,"touchmove",function(t){e._move(t)}),this._bindEvent(this.wrapper,"touchend",function(t){e._end(t)}),this._bindEvent(window,"resize",function(t){e.refresh()}),this._bindEvent(this.wrapper,"scroll",function(t){e.useNativeScroll&&Math.abs(e.wrapper.scrollTop-Math.abs(e.wrapper.clientHeight-e.wrapper.scrollHeight))<=e.bottomTipHeight&&(e.onBottom(),e.autoLoad&&!e.nomore&&e.onLoad())})}},{key:"refresh",value:function(){this.useNativeScroll?this.offsetY=this.minOffsetY:(this.offsetY>=this.minOffsetY?this.offsetY=this.minOffsetY:this.offsetY<=this.maxOffsetY&&(this.offsetY=this.maxOffsetY),this.maxOffsetY=this.wrapper.clientHeight-this.scroller.clientHeight,this.bar&&(this.barHeight=this.wrapper.clientHeight*(this.wrapper.clientHeight/(this.wrapper.scrollHeight+this.bottomTipHeight)),this.bar.style.height=this.barHeight+"px")),this._tranlate(this.scroller,500)}},{key:"setOffsetY",value:function(t){this.offsetY=t}},{key:"scrollTop",value:function(t){this.useNativeScroll||(this.offsetY=t,this._tranlate(this.scroller,300))}},{key:"setNomore",value:function(t){this.nomore=t}},{key:"destroy",value:function(){this._removeAllEvent()}},{key:"_tranlate",value:function(t,e,i){var s=void 0!=i?i:this.offsetY;if(e||(e=0),t.style.transitionProperty=e?"transform":"none",t.style.transformOrigin="0px 0px 0px",t.style.transitionTimingFunction="cubic-bezier(0.33, 0.66, 0.66, 1)",t.style.transitionDuration=e+"ms",t.style.transform="translateY("+s+"px) translateZ(0)",this.bar&&t==this.scroller){s=0;this.offsetY<this.minOffsetY&&this.offsetY>this.maxOffsetY?s=(this.offsetY-this.minOffsetY)/this.maxOffsetY*(this.wrapper.clientHeight-this.barHeight):this.offsetY<=this.maxOffsetY&&(s=this.wrapper.clientHeight-this.barHeight),this.bar.style.transformOrigin="0px 0px 0px",this.bar.style.transitionTimingFunction="cubic-bezier(0.33, 0.66, 0.66, 1)",this.bar.style.transitionDuration=e+"ms",this.bar.style.transform="translateY("+s+"px) translateZ(0)"}}},{key:"_momentum",value:function(t,e,i,s){var o,r,h,a=t-e,n=Math.abs(a)/i;return r=n*n/(2*(s=s||6e-4))*(a<0?-1:1),h=n/s,(o=this.offsetY+r)<this.maxOffsetY&&this.maxOffsetY<this.minOffsetY?(o=this.maxOffsetY,h=(a=Math.abs(this.offsetY-o))/n):o>this.minOffsetY?(o=this.minOffsetY,h=(a=Math.abs(this.offsetY-o))/n):this.maxOffsetY>this.minOffsetY&&o<this.minOffsetY&&(o=this.minOffsetY),{destOffsetY:Math.round(o),duration:h}}},{key:"_start",value:function(t){var e=(window.getComputedStyle?window.getComputedStyle(this.scroller,null):this.scroller.currentStyle).transform;e.indexOf("matrix")>-1&&(this.bar&&(window.getComputedStyle?window.getComputedStyle(this.bar,null):this.scroller.currentStyle),this.offsetY=Number(e.replace(/matrix\(|\)/g,"").split(",")[5]),this._tranlate(this.scroller)),this.useNativeScroll?(clearTimeout(this.baunceTimeoutId),this.preY=this.startY=t.touches[0].pageY):(this.enableFadeout&&(this.bar.style.transitionDuration="0ms",window.getComputedStyle?window.getComputedStyle(this.bar,null):this.scroller.currentStyle,this.bar.style.opacity=this.barOpacity,this.bar.style.display="block"),this.startTime=(new Date).getTime(),this.preY=this.startY=t.touches[0].pageY,clearTimeout(this.barFadeTimeoutId)),0==this.wrapper.scrollTop&&(this.hasSlideUp=!1),this.onStart(this.offsetY)}},{key:"_move",value:function(e){this.disY=e.touches[0].pageY-this.preY,this.preY=e.touches[0].pageY;var i=(new Date).getTime(),s=-1;i-this.startTime>300&&(this.startTime=i,this.startY=e.touches[0].pageY),this.disY<10&&i-this.startTime>300||(this.useNativeScroll?(this.disY<0&&(this.hasSlideUp=!0),Math.abs(this.wrapper.scrollTop-Math.abs(this.wrapper.clientHeight-this.wrapper.scrollHeight))<2&&this.offsetY+this.disY<this.minOffsetY?(e.preventDefault(),e.stopPropagation(),this.isOutBottom=!0,this.isOutTop=!1,this.disY*=.25,this.offsetY+=this.disY,this._tranlate(this.scroller),s=t.OUT_BOTTOM,!this.nomore&&this.offsetY<.5*-this.bottomTipHeight+this.minOffsetY&&!this.autoLoad&&(s=t.LOAD_ABLE)):0==this.wrapper.scrollTop&&this.offsetY+this.disY>this.minOffsetY&&(this.offsetY>this.minOffsetY||!this.hasSlideUp)?(e.preventDefault(),e.stopPropagation(),this.isOutTop=!0,this.isOutBottom=!1,this.disY*=.25,this.offsetY+=this.disY,this._tranlate(this.scroller),s=t.OUT_TOP,this.offsetY>this.minOffsetY+this.topTipHeight&&(s=t.REFRESH_ABLE)):Math.abs(this.offsetY-this.minOffsetY)>5&&(e.preventDefault(),e.stopPropagation(),this.isOutTop=!1,this.isOutBottom=!1,this.offsetY=this.disY,this._tranlate(this.scroller))):(e.preventDefault(),e.stopPropagation(),this.offsetY<this.maxOffsetY&&this.maxOffsetY<0?(this.isOutBottom=!0,this.isOutTop=!1,this.disY*=.25,this.offsetY+=this.disY,this._tranlate(this.scroller),s=t.OUT_BOTTOM,!this.nomore&&this.offsetY<this.maxOffsetY-.5*this.bottomTipHeight&&!this.autoLoad&&(s=t.LOAD_ABLE)):this.offsetY>this.minOffsetY?(this.isOutTop=!0,this.isOutBottom=!1,this.disY*=.25,this.offsetY+=this.disY,this._tranlate(this.scroller),s=t.OUT_TOP,this.offsetY>=this.minOffsetY+this.topTipHeight&&(s=t.REFRESH_ABLE)):(this.isOutTop=!1,this.isOutBottom=!1,this.offsetY+=this.disY,this._tranlate(this.scroller))),this.onMove(this.offsetY,s))}},{key:"_end",value:function(t){var e=this,i=this.offsetY;this.endTime=(new Date).getTime();var s=this.endTime-this.startTime;if(this.useNativeScroll)this.isOutBottom?(this.offsetY=this.minOffsetY,!this.nomore&&i<.5*-this.bottomTipHeight+this.minOffsetY&&!this.autoLoad&&this.onLoad(),s=Math.abs(i-this.minOffsetY)/this.wrapper.clientHeight*1500,this._tranlate(this.scroller,s)):this.isOutTop?i>this.minOffsetY+this.topTipHeight?(this.offsetY=this.minOffsetY+this.topTipHeight,this._tranlate(this.scroller,300),this.onRefresh()):(this.offsetY=this.minOffsetY,s=Math.abs(i-this.offsetY)/this.wrapper.clientHeight*1500,this._tranlate(this.scroller,s)):(this.offsetY=this.minOffsetY,this._tranlate(this.scroller,0));else{if(this.isOutBottom)this.offsetY=this.maxOffsetY,!this.nomore&&i<this.maxOffsetY-.5*this.bottomTipHeight&&!this.autoLoad&&this.onLoad(),s=Math.abs(i-this.offsetY)/this.wrapper.clientHeight*1500,this._tranlate(this.scroller,s),this.onBottom();else if(this.isOutTop)i>=this.minOffsetY+this.topTipHeight?(this.offsetY=this.minOffsetY+this.topTipHeight,this._tranlate(this.scroller,300),this.onRefresh()):(this.offsetY=this.minOffsetY,s=Math.abs(i-this.offsetY)/this.wrapper.clientHeight*1500,this._tranlate(this.scroller,s));else{var o=this._momentum(this.preY,this.startY,s);this.offsetY=o.destOffsetY,s=o.duration,this._tranlate(this.scroller,s)}this.autoLoad&&!this.nomore&&this.offsetY<=this.maxOffsetY&&this.maxOffsetY<0&&this.onLoad(),clearTimeout(this.barFadeTimeoutId),this.barFadeTimeoutId=setTimeout(function(){e.enableFadeout&&"none"!=e.bar.style.display&&(e.bar.style.transitionDuration="1000ms",window.getComputedStyle?window.getComputedStyle(e.bar,null):e.scroller.currentStyle,e.bar.style.opacity="0")},s+500)}this.onEnd(this.offsetY)}},{key:"_createScrollBar",value:function(){if(this.maxOffsetY>=0)return!1;var t,e=document.createElement("div");return e.setAttribute("style","position:absolute;top:0;right:0;height:"+this.barHeight+"px"),e.setAttribute("class",this.barClassName?this.barClassName:""),this.wrapper.appendChild(e),t=window.getComputedStyle?window.getComputedStyle(e,null):this.scroller.currentStyle,this.barOpacity=t.opacity,e}},{key:"_bindEvent",value:function(t,e,i){window.attachEvent?t.attachEvent("on"+e,i):t.addEventListener(e,i,!1),this.allListener[this.allListener.length]={ele:t,func:i,event:e}}},{key:"_removeEvent",value:function(t,e,i){window.attachEvent?t.detachEvent("on"+e,i):t.removeEventListener(e,i,!1)}},{key:"_removeAllEvent",value:function(){for(var t=0;t<this.allListener.length;t++){var e=this.allListener[t];this._removeEvent(e.ele,e.event,e.func)}}}]),t}();o.OUT_TOP=1,o.OUT_BOTTOM=2,o.REFRESH_ABLE=3,o.LOAD_ABLE=4,e.default=o}]);
//# sourceMappingURL=demo.min.js.map